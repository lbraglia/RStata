# string cmd input works

    Code
      stata("sum", mtcars)
    Output
      . sum
      
          Variable |        Obs        Mean    Std. dev.       Min        Max
      -------------+---------------------------------------------------------
               mpg |         32    20.09062    6.026948       10.4       33.9
               cyl |         32      6.1875    1.785922          4          8
              disp |         32    230.7219    123.9387       71.1        472
                hp |         32    146.6875    68.56287         52        335
              drat |         32    3.596563    .5346787       2.76       4.93
      -------------+---------------------------------------------------------
                wt |         32     3.21725    .9784574      1.513      5.424
              qsec |         32    17.84875    1.786943       14.5       22.9
                vs |         32       .4375    .5040161          0          1
                am |         32      .40625    .4989909          0          1
              gear |         32      3.6875    .7378041          3          5
      -------------+---------------------------------------------------------
              carb |         32      2.8125      1.6152          1          8

# version provided as an argument works

    Code
      stata("sum", mtcars, stata.version = version)
    Output
      . sum
      
          Variable |        Obs        Mean    Std. dev.       Min        Max
      -------------+---------------------------------------------------------
               mpg |         32    20.09062    6.026948       10.4       33.9
               cyl |         32      6.1875    1.785922          4          8
              disp |         32    230.7219    123.9387       71.1        472
                hp |         32    146.6875    68.56287         52        335
              drat |         32    3.596563    .5346787       2.76       4.93
      -------------+---------------------------------------------------------
                wt |         32     3.21725    .9784574      1.513      5.424
              qsec |         32    17.84875    1.786943       14.5       22.9
                vs |         32       .4375    .5040161          0          1
                am |         32      .40625    .4989909          0          1
              gear |         32      3.6875    .7378041          3          5
      -------------+---------------------------------------------------------
              carb |         32      2.8125      1.6152          1          8

# path provided as an argument works

    Code
      stata("sum", mtcars, stata.path = path)
    Output
      . sum
      
          Variable |        Obs        Mean    Std. dev.       Min        Max
      -------------+---------------------------------------------------------
               mpg |         32    20.09062    6.026948       10.4       33.9
               cyl |         32      6.1875    1.785922          4          8
              disp |         32    230.7219    123.9387       71.1        472
                hp |         32    146.6875    68.56287         52        335
              drat |         32    3.596563    .5346787       2.76       4.93
      -------------+---------------------------------------------------------
                wt |         32     3.21725    .9784574      1.513      5.424
              qsec |         32    17.84875    1.786943       14.5       22.9
                vs |         32       .4375    .5040161          0          1
                am |         32      .40625    .4989909          0          1
              gear |         32      3.6875    .7378041          3          5
      -------------+---------------------------------------------------------
              carb |         32      2.8125      1.6152          1          8

# string cmd input works with data.out

    Code
      stata("sum", mtcars, data.out = TRUE)
    Output
      . sum
      
          Variable |        Obs        Mean    Std. dev.       Min        Max
      -------------+---------------------------------------------------------
               mpg |         32    20.09062    6.026948       10.4       33.9
               cyl |         32      6.1875    1.785922          4          8
              disp |         32    230.7219    123.9387       71.1        472
                hp |         32    146.6875    68.56287         52        335
              drat |         32    3.596563    .5346787       2.76       4.93
      -------------+---------------------------------------------------------
                wt |         32     3.21725    .9784574      1.513      5.424
              qsec |         32    17.84875    1.786943       14.5       22.9
                vs |         32       .4375    .5040161          0          1
                am |         32      .40625    .4989909          0          1
              gear |         32      3.6875    .7378041          3          5
      -------------+---------------------------------------------------------
              carb |         32      2.8125      1.6152          1          8

---

    {
      "type": "list",
      "attributes": {
        "class": {
          "type": "character",
          "attributes": {},
          "value": ["tbl_df", "tbl", "data.frame"]
        },
        "row.names": {
          "type": "integer",
          "attributes": {},
          "value": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32]
        },
        "names": {
          "type": "character",
          "attributes": {},
          "value": ["mpg", "cyl", "disp", "hp", "drat", "wt", "qsec", "vs", "am", "gear", "carb"]
        }
      },
      "value": [
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [21, 21, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8, 19.2, 17.8, 16.4, 17.3, 15.2, 10.4, 10.4, 14.7, 32.4, 30.4, 33.9, 21.5, 15.5, 15.2, 13.3, 19.2, 27.3, 26, 30.4, 15.8, 19.7, 15, 21.4]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4, 4, 4, 4, 8, 8, 8, 8, 4, 4, 4, 8, 6, 8, 4]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [160, 160, 108, 258, 360, 225, 360, 146.7, 140.8, 167.6, 167.6, 275.8, 275.8, 275.8, 472, 460, 440, 78.7, 75.7, 71.1, 120.1, 318, 304, 350, 400, 79, 120.3, 95.1, 351, 145, 301, 121]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 180, 180, 180, 205, 215, 230, 66, 52, 65, 97, 150, 150, 245, 175, 66, 91, 113, 264, 175, 335, 109]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [3.9, 3.9, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, 3.92, 3.92, 3.07, 3.07, 3.07, 2.93, 3, 3.23, 4.08, 4.93, 4.22, 3.7, 2.76, 3.15, 3.73, 3.08, 4.08, 4.43, 3.77, 4.22, 3.62, 3.54, 4.11]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [2.62, 2.875, 2.32, 3.215, 3.44, 3.46, 3.57, 3.19, 3.15, 3.44, 3.44, 4.07, 3.73, 3.78, 5.25, 5.424, 5.345, 2.2, 1.615, 1.835, 2.465, 3.52, 3.435, 3.84, 3.845, 1.935, 2.14, 1.513, 3.17, 2.77, 3.57, 2.78]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [16.46, 17.02, 18.61, 19.44, 17.02, 20.22, 15.84, 20, 22.9, 18.3, 18.9, 17.4, 17.6, 18, 17.98, 17.82, 17.42, 19.47, 18.52, 19.9, 20.01, 16.87, 17.3, 15.41, 17.05, 18.9, 16.7, 16.9, 14.5, 15.5, 14.6, 18.6]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3, 3, 3, 3, 4, 5, 5, 5, 5, 5, 4]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1, 2, 1, 1, 2, 2, 4, 2, 1, 2, 2, 4, 6, 8, 2]
        }
      ]
    }

# do file input works

    Code
      stata(testthat::test_path("fixtures/test.do"), mtcars)
    Output
      . sum
      
          Variable |        Obs        Mean    Std. dev.       Min        Max
      -------------+---------------------------------------------------------
               mpg |         32    20.09062    6.026948       10.4       33.9
               cyl |         32      6.1875    1.785922          4          8
              disp |         32    230.7219    123.9387       71.1        472
                hp |         32    146.6875    68.56287         52        335
              drat |         32    3.596563    .5346787       2.76       4.93
      -------------+---------------------------------------------------------
                wt |         32     3.21725    .9784574      1.513      5.424
              qsec |         32    17.84875    1.786943       14.5       22.9
                vs |         32       .4375    .5040161          0          1
                am |         32      .40625    .4989909          0          1
              gear |         32      3.6875    .7378041          3          5
      -------------+---------------------------------------------------------
              carb |         32      2.8125      1.6152          1          8
      . gen test = 1

# do file input works with data.out

    Code
      stata(testthat::test_path("fixtures/test.do"), mtcars, data.out = TRUE)
    Output
      . sum
      
          Variable |        Obs        Mean    Std. dev.       Min        Max
      -------------+---------------------------------------------------------
               mpg |         32    20.09062    6.026948       10.4       33.9
               cyl |         32      6.1875    1.785922          4          8
              disp |         32    230.7219    123.9387       71.1        472
                hp |         32    146.6875    68.56287         52        335
              drat |         32    3.596563    .5346787       2.76       4.93
      -------------+---------------------------------------------------------
                wt |         32     3.21725    .9784574      1.513      5.424
              qsec |         32    17.84875    1.786943       14.5       22.9
                vs |         32       .4375    .5040161          0          1
                am |         32      .40625    .4989909          0          1
              gear |         32      3.6875    .7378041          3          5
      -------------+---------------------------------------------------------
              carb |         32      2.8125      1.6152          1          8
      . gen test = 1

---

    {
      "type": "list",
      "attributes": {
        "class": {
          "type": "character",
          "attributes": {},
          "value": ["tbl_df", "tbl", "data.frame"]
        },
        "row.names": {
          "type": "integer",
          "attributes": {},
          "value": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32]
        },
        "names": {
          "type": "character",
          "attributes": {},
          "value": ["mpg", "cyl", "disp", "hp", "drat", "wt", "qsec", "vs", "am", "gear", "carb", "test"]
        }
      },
      "value": [
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [21, 21, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8, 19.2, 17.8, 16.4, 17.3, 15.2, 10.4, 10.4, 14.7, 32.4, 30.4, 33.9, 21.5, 15.5, 15.2, 13.3, 19.2, 27.3, 26, 30.4, 15.8, 19.7, 15, 21.4]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4, 4, 4, 4, 8, 8, 8, 8, 4, 4, 4, 8, 6, 8, 4]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [160, 160, 108, 258, 360, 225, 360, 146.7, 140.8, 167.6, 167.6, 275.8, 275.8, 275.8, 472, 460, 440, 78.7, 75.7, 71.1, 120.1, 318, 304, 350, 400, 79, 120.3, 95.1, 351, 145, 301, 121]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 180, 180, 180, 205, 215, 230, 66, 52, 65, 97, 150, 150, 245, 175, 66, 91, 113, 264, 175, 335, 109]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [3.9, 3.9, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, 3.92, 3.92, 3.07, 3.07, 3.07, 2.93, 3, 3.23, 4.08, 4.93, 4.22, 3.7, 2.76, 3.15, 3.73, 3.08, 4.08, 4.43, 3.77, 4.22, 3.62, 3.54, 4.11]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [2.62, 2.875, 2.32, 3.215, 3.44, 3.46, 3.57, 3.19, 3.15, 3.44, 3.44, 4.07, 3.73, 3.78, 5.25, 5.424, 5.345, 2.2, 1.615, 1.835, 2.465, 3.52, 3.435, 3.84, 3.845, 1.935, 2.14, 1.513, 3.17, 2.77, 3.57, 2.78]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [16.46, 17.02, 18.61, 19.44, 17.02, 20.22, 15.84, 20, 22.9, 18.3, 18.9, 17.4, 17.6, 18, 17.98, 17.82, 17.42, 19.47, 18.52, 19.9, 20.01, 16.87, 17.3, 15.41, 17.05, 18.9, 16.7, 16.9, 14.5, 15.5, 14.6, 18.6]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3, 3, 3, 3, 4, 5, 5, 5, 5, 5, 4]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%10.0g"]
            }
          },
          "value": [4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1, 2, 1, 1, 2, 2, 4, 2, 1, 2, 2, 4, 6, 8, 2]
        },
        {
          "type": "double",
          "attributes": {
            "format.stata": {
              "type": "character",
              "attributes": {},
              "value": ["%9.0g"]
            }
          },
          "value": [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        }
      ]
    }

